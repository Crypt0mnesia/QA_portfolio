# API Тесты для Яндекс.Самокат
Проект автоматизации тестирования API сервиса "Яндекс.Самокат" с использованием REST API тестов и Allure-отчетов.

##  О проекте

Проект содержит автотесты для проверки API учебного сервиса [**«Яндекс.Самокат»**](https://qa-scooter.praktikum-services.ru) - сервиса аренды самокатов:
- Тестирование создания и авторизации курьеров
- Тестирование создания заказов с различными параметрами
- Проверка получения списка заказов
- Валидация кодов ответа и тел ответов API

[**Тестовый стенд**](https://qa-scooter.praktikum-services.ru)

[**Документация API**](https://qa-scooter.praktikum-services.ru/docs/#api-Courier-Login)

## Структура проекта
Этот проект является частью портфолио `QA_profile`. 

**Расположение в портфолио:** 
`QA_profile/02_api_testing/yandex_samokat_api/`

После клонирования всего репозитория перейдите в эту папку для работы с проектом.


### Директории и файлы:
- **`allure-results/`** — содержит результаты выполнения тестов для генерации Allure-отчетов
- **`src/`** — содержит исходный код проекта с классами для работы с API 
  - **`endpoints.py`** — базовые URL и endpoints API сервиса
  - **`base_api.py`** — базовый класс для API запросов с Allure-степами
  - **`data_generator.py`** — генераторы тестовых данных для курьеров и заказов
  - **`courier_api.py`** — API методы для работы с курьерами (создание, логин, удаление)
  - **`order_api.py`** — API методы для работы с заказами (создание, получение списка)
 
- **`tests/`** — содержит тестовые сценарии, разделенные по функциональности
  - **`test_courier_creation.py`** — тесты создания курьера 
  - **`test_courier_login.py`** — тесты авторизации курьера 
  - **`test_order_creation.py`** — тесты создания заказа с параметризацией цветов
  - **`test_order_list.py`** — тесты получения списка заказов
- **`conftest.py`** — содержит фикстуры pytest для подготовки тестовых данных
- **`requirements.txt`** — список зависимостей проекта
- **`README.md`** — документация проекта

### Тестовые сценарии

### Создание курьера
1. **Успешное создание курьера** - проверка кода 201 и тела ответа `{"ok": true}`
2. **Создание дубликата курьера** - попытка создать курьера с существующими данными (ожидается ошибка 409)
3. **Создание с существующим логином** - проверка уникальности логина
4. **Создание без логина** - проверка обязательности поля (ожидается ошибка 400)
5. **Создание без пароля** - проверка обязательности поля (ожидается ошибка 400)

### Авторизация курьера  
1. **Успешная авторизация** - проверка кода 200 и наличия id в ответе
2. **Авторизация без логина** - проверка обязательности поля (ожидается ошибка 400)
3. **Авторизация без пароля** - проверка обязательности поля (ожидается ошибка 400)
4. **Авторизация с неверным логином** - проверка безопасности (ожидается ошибка 404)
5. **Авторизация с неверным паролем** - проверка безопасности (ожидается ошибка 404)
6. **Авторизация несуществующего курьера** - проверка обработки невалидных данных

### Создание заказа
1. **Заказ с цветом BLACK** - параметризованный тест
2. **Заказ с цветом GREY** - параметризованный тест  
3. **Заказ с обоими цветами** - параметризованный тест
4. **Заказ без указания цвета** - параметризованный тест
5. **Наличие track в ответе** - проверка для всех вариантов цветов

### Список заказов
1. **Получение списка заказов** - проверка, что возвращается валидный список


### Установка и запуск
```bash
# Клонирование портфолио, переход в папку проекта и настройка
git clone https://github.com/Crypt0mnesia/QA_profile.git
cd QA_profile/02_api_testing/yandex_samokat_api/
python -m venv .venv
source .venv/bin/activate  # или .venv\Scripts\activate на Windows

# Установка зависимостей
pip install -r requirements.txt.txt

```
### Запуск тестов 
```bash
#Запуск тестов 
pytest --alluredir=allure-results

# Запуск с подробным выводом
pytest -v --alluredir=allure-results
# Запуск конкретных тест-сьютов

# Только тесты создания курьера
pytest tests/test_courier_creation.py --alluredir=allure-results

# Только тесты авторизации курьера
pytest tests/test_courier_login.py --alluredir=allure-results

# Только тесты создания заказов
pytest tests/test_order_creation.py --alluredir=allure-results

# Тесты получения списка заказов
pytest tests/test_order_list.py --alluredir=allure-results
```

###  Просмотр Allure-отчёта

Для просмотра отчёта после выполнения тестов:

```bash
# Генерация отчета
pytest --alluredir=allure-results

# Просмотр отчета
allure serve allure-results
```
Или для статического отчета:
```bash
# Генерация HTML отчета
allure generate allure-results -o allure-report --clean

# Запуск локального сервера
cd allure-report
python -m http.server 8000
```
